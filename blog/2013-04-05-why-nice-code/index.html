<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Why nice code - Nice R Code</title>
  <meta name="author" content="Rich FitzJohn & Daniel Falster">

  
  <meta name="description" content="<!-- Why are students here
Goals: performance, learning, affective, social
Value: attainment, intrinsic, instrumental Instrumental - allows you to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nicercode.github.com/blog/2013-04-05-why-nice-code/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Nice R Code" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Bitter:400,700,400italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39493992-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Nice R Code</a></h1>
  
    <h2>Punning code better since 2013</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nicercode.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Why nice code</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-05T14:46:00+11:00" pubdate data-updated="true">05 April 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><!-- 
Why are students here
Goals: performance, learning, affective, social
Value: attainment, intrinsic, instrumental 

Instrumental - allows you to accomplish other important goals (extrinsic 
rewards), i.e. learn about world, write papers, impress others
Intrinsic - value nice code for itself (craftsmanship)
Attainment -  satisfaction in getting something to work
-->

<p>Writing code is fast becoming a key - if not the most important - skill for 
doing research in the 21st century. As scientists, we live in extraordinary 
times. The amount of data (information) available to us is increasingly 
exponentially, allowing for rapid advances in our understanding of the world 
around us. The amount of information contained in a standard scientific paper 
also seems to be on the rise. Researchers therefore need to be able to handle 
ever larger amounts of data to ask novel questions and get papers published.
Yet, the standard tools used by many biologists -  point and click programs for 
manipulating data, doing stats and making plots - do not allow us to scale-up 
our analyses to macth data availability, at least not without many, many more 
‘clicks’. The solution is to write scripts in programs like 
<a href="http://www.r-project.org/">R</a>, <a href="http://www.python.org/">python</a> or 
<a href="http://www.mathworks.com.au/products/matlab/">matlab</a>. Scripting allows you to 
automate analyses, and therefore <a href="http://i.imgur.com/SbzNW8s.png">scale-up without a big increase in 
effort</a>.  </p>

<p>Writing code also offers other benefits to research. When your 
analyses are documented in a script, it is easier to pick up a project and 
start working on it again. You have a record of what you did and why. Chunks 
of code can also be reused in new projects, saving vast amount of time. Writing 
code also allows for effective collaboration with people from all over the 
world. For all these reasons, many researchers are now learning how to write 
code.</p>

<p>Yet, most researchers have no or limited formal training in computer science, 
and thus struggle to write nice code. Most of us are self-taught, having used a 
mix of books, advice from other amateur coders, internet posts, and lots of 
trial and error. Soon after have we written our first R script, our hard drives 
explode with large bodies of barely readable code that we only half understand, 
that also happens to be full of bugs and is generally difficult to use. Not 
surprisingly, many researchers find writing code to be a relatively painful 
process, involving lots of trial and error and, inevitably, frustration. </p>

<p>If this sounds familiar to you, don’t worry, you are not alone. There are many 
<a href="/intro/resources.html">great R resources</a> available, but most show you how 
to do some fancy trick, e.g. run some complicated statistical test or make a 
fancy plot. Few people - outside of computer science departments - spend time 
discussing the qualities of nice code and teaching you good coding habits. 
Certainly no one is teaching you these skills in your standard biology research 
department.</p>

<p>Observing how colleagues were struggling with their code, we 
(<a href="http://www.zoology.ubc.ca/~fitzjohn/">Rich FitzJohn</a> and 
<a href="http://www.falsters.net/daniel">Daniel Falster</a>) have teamed up to bring you 
the <a href="http://nicercode.github.io/">nice R code</a> course and blog. We are 
targeting researchers who are already using R and want to take their coding to 
the next level. Our goal is to help you write nicer code. <strong>By ‘nicer’ we mean 
code that is easy to read, easy to write, runs fast, gives reliable results, is 
easy to reuse in new projects, and is easy to share with collaborators.</strong> We 
will be focussing on elements of workflow, good coding habits and some tricks,
that will help transform your code from messy to nice.</p>

<p>The inspiration for nice R code came in part from attending a boot camp run by 
Greg Wilson from the <a href="http://software-carpentry.org/">software carpentry team</a>. 
These boot camps aim to help researchers be more productive by teaching them 
basic computing skills. Unlike other software courses we had attended, the 
focus in the boot camps was on good programming habits and design. As 
biologists, we saw a need for more material focussed on R, the language that 
has come to dominate biological research. We are experts, but have more 
experience than many biologists. Hence the nice R code blog.</p>

<h2 id="key-elements-of-nice-r-code">Key elements of nice R code</h2>
<p>We will now briefly consider some of the key principles of writing nice code. </p>

<h3 id="nice-code-is-easy-to-read">Nice code is easy to read</h3>

<blockquote>
  <p>Programs should be written for people to read, and only incidentally for 
machines to execute.
– from “Structure and Interpretation of Computer Programs” by Abelson and 
Sussman</p>
</blockquote>

<p>Readability is by far the most important guiding principle for writing nicer 
code. <strong>Anyone (especially you) should be able to pick up any of your 
projects, understand what the code does and how to run it</strong>. Most code 
written for research purposes is not easy to read.</p>

<p>In our opinion, there are no fixed rules for what nice code should look like. 
There 
is just a single test: is it easy to read? To check how nice your code
is, pass it to a collaborator, or pick up some code you haven’t used for 
over a year. Do they (you) understand it?</p>

<p>Below are some general guidelines for making your code more readable. We 
will explore each of these in more detail here on the blog:</p>

<ul>
  <li>Use a sensible directory structure for organising project related 
materials. </li>
  <li>abstract your code into many small functions with helpful descriptive 
names </li>
  <li>use comments, design features, and meaningful variable or function names 
to capture the intent of your code, i.e. describe what it is <em>meant</em> to do</li>
  <li>use version control. There are many reasons for using version control. 
One is that it stores seamlessly archives older versions of your code, 
permitting you to ruthlessly yet safely delete old files, and therefore helps 
reduce clutter. </li>
  <li>apply a consistent style, such as that described in  the google R style 
guide.</li>
</ul>

<h3 id="nice-code-is-reliable-ie-bug-free">Nice code is reliable, i.e. bug free</h3>

<blockquote>
  <p>The computer does exactly what you tell it to.</p>
</blockquote>

<p>In other words, if there is a problem, it’s most likely yours. How certain 
are you that your code is error free? More than once I have reached a state 
of near panic, looking over my code to ensure it is bug free before 
submitting a final version of a paper for publication. </p>

<p>It is almost impossible to ensure code is bug free, but one can adopt healthy
habits that minimise the chance of this occurring:</p>

<ul>
  <li>Don’t repeat yourself. The less you type, the fewer chances there are for 
mistakes</li>
  <li>use test scripts, to compare your code against known cases</li>
  <li>avoid using global variables, the attach function and other nasties where 
ownership of data cannot be ensured</li>
  <li>use version control so that you see what has changed, and easily trace 
mistakes</li>
  <li>wherever possible, open your code and project up for review, either by 
colleagues, during review process, or in repositories such as github.</li>
</ul>

<p>Note also, the more <em>readable</em> your code is, the less likely it is to contain 
errors.</p>

<h3 id="nice-code-runs-quickly-and-is-therefore-a-pleasure-to-use">Nice code runs quickly and is therefore a pleasure to use</h3>

<blockquote>
  <p>The faster you can make the plot, the more fun you will have.</p>
</blockquote>

<p>Code that is slow to run is less fun to use. By <em>slow</em> I mean anything
that takes more than a few seconds to run, so impedes analysis. 
Speed is particularly an issue for people analysing large datasets, or 
running complex simulations, where code may run for many hours, days, 
or weeks. </p>

<p>Some effective strategies for making code run faster:</p>

<ul>
  <li>abstract your code into functions, so that you can compare different 
versions</li>
  <li>use code profiling to identify the main computational bottlenecks
and improve them</li>
  <li>think carefully about algorithm design</li>
  <li>understand why some operations are intrinsically slower 
than others, e.g. why a <code>for</code> loop is slower than using <code>lapply</code></li>
  <li>use multiple processors to increase computing power, either in your
own machine or by running your code on a cluster.</li>
</ul>

<h2 id="the-benefits-of-writing-nicer-code">The benefits of writing nicer code</h2>
<p>There are many benefits of writing nicer code:</p>

<ul>
  <li><strong>Better science</strong>: more data, less bugs.</li>
  <li><strong>More fun</strong>: spend less time wrestling with R, enjoyment of scientific 
process. Nice code is more fun</li>
  <li><strong>Bigger datasets</strong>: allows you to scale up. Repetition is avoidable, which 
it isn’t in field or lab. </li>
  <li><strong>Become more efficient</strong>:  nice code is reusable, sharable. </li>
  <li><strong>Future employment</strong>: Impact. You should consider anything 
you write (open or closed) to be a potential advert to a future employer. <a href="http://www.nature.com/naturejobs/science/articles/10.1038/nj7440-271">Scientists with an analytical bent are often sought-after</a>.</li>
</ul>

<p>There is a common perception among scientists we have talked with that provided 
the code “runs”, it doesn’t need to be nice. Researchers are primarily 
interested in writing scientific papers, so spend 
most of their time getting their code to run, and almost no time focussing on 
the 
quality of the code itself. Along the way we might take a number of shortcuts, 
telling ourselves that it doesn’t matter, as 
long as it runs, right? If you take that approach, you are unlikely to see the benefits listed above.</p>

<p>If you need further motivation, consider this advice, 
taken from <a href="http://www.techrepublic.com/blog/geekend/pic-the-greatest-programming-tip-e
ver-written/817">an advisory pop-up for MS Visual 
C++</a>  </p>

<blockquote class="twitter-tweet"><p>Always code as if the person who will 
maintain your code is a maniac serial killer that knows where you 
live.</p>&mdash; Anbarasan Gangadaran (@anabarasan) <a href="https://twitter.com/anabarasan/status/275606827922767872">December 3, 
2012</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>This might sound extreme, until you realise that the maniac serial killer is 
<strong>you</strong>, and they definitely know where you live. </p>

<p>At some point, you will 
return to nearly every piece of code you wrote and need to understand it 
afresh. If it is messy code, you will spend a lot of time going over it to 
understand what you did, possibly a week, month, year or decade ago. Although 
you are unlikely get so frustrated as to seek bloody revenge on your former 
self, you might come close. As Greg Wilson stated clearly in our software 
carpentry course, 
&gt; The single biggest reason you should write nice code is so that your future 
&gt; self can understand it.</p>

<p>As a by product, we also note that code that is easy to read is also easy to 
reuse in new projects and share with colleagues, including as online 
supplementary material. Increasingly, journals are requiring code be submitted 
as part of the review process and often published online. Alas, much of the 
current crop of code is difficult to read. At best, having messy code may reduce 
the impact of your paper, at worst, your paper might get rejected because the 
reviewer can’t understand your code.</p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Daniel Falster</span></span>

      








  


<time datetime="2013-04-05T14:46:00+11:00" pubdate data-updated="true">05 April 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/module/'>module</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://nicercode.github.com/blog/2013-04-05-why-nice-code/" data-via="" data-counturl="http://nicercode.github.com/blog/2013-04-05-why-nice-code/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013-04-05-projects/" title="Previous Post: Designing projects">&laquo; Designing projects</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013-04-05-why-nice-code/">Why nice code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-04-05-projects/">Designing projects</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-03-08-nice-r-code-2013-plans/">Plans for 'Nice R code module', Macquarie University 2013</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013-02-12-r-ecology-evolution/">R in ecology and evolution</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Rich FitzJohn & Daniel Falster -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'nicercode';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://nicercode.github.com/blog/2013-04-05-why-nice-code/';
        var disqus_url = 'http://nicercode.github.com/blog/2013-04-05-why-nice-code/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
